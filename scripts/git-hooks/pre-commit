#!/bin/bash

# Pre-commit hook: ktlint ê²€ì‚¬
# ì»¤ë°‹ ì „ ì½”ë“œ ìŠ¤íƒ€ì¼ ê²€ì‚¬ ì‹¤í–‰

echo "ğŸ” Running ktlint check..."

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¡œ ì´ë™
cd "$(git rev-parse --show-toplevel)"

# ktlint ê²€ì‚¬ ì‹¤í–‰
./gradlew ktlintCheck --daemon

RESULT=$?

if [ $RESULT -ne 0 ]; then
    echo ""
    echo "âŒ ktlint check failed!"
    echo ""
    echo "ìë™ ìˆ˜ì •ì„ ì›í•˜ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:"
    echo "  ./gradlew ktlintFormat"
    echo ""
    echo "ìˆ˜ì • í›„ ë‹¤ì‹œ ì»¤ë°‹í•˜ì„¸ìš”."
    exit 1
fi

echo "âœ… ktlint check passed!"
exit 0
